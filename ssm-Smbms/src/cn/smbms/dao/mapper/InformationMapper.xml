<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper SYSTEM "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.smbms.dao.InformationDao">

	<resultMap id="BaseResultMap" type="cn.smbms.pojo.Information">
		<id column="idInformation" property="idInformation" jdbcType="VARCHAR" />
		<result column="time" property="time" jdbcType="TIMESTAMP" />
		<result column="title" property="title" jdbcType="VARCHAR" />
		<result column="type" property="type" jdbcType="INTEGER" />
		<result column="QQ" property="QQ" jdbcType="VARCHAR" />
		<result column="WX" property="WX" jdbcType="VARCHAR" />
		<result column="address" property="address" jdbcType="VARCHAR" />
		<result column="sex" property="sex" jdbcType="VARCHAR" />
		<result column="phone" property="phone" jdbcType="VARCHAR" />
		<result column="mailbox" property="mailbox" jdbcType="VARCHAR" />
		<result column="majorName" property="majorName" jdbcType="VARCHAR" />
		<result column="company" property="company" jdbcType="VARCHAR" />
		<result column="className" property="className" jdbcType="VARCHAR" />
		<result column="areaName" property="areaName" jdbcType="VARCHAR" />
	</resultMap>

	<insert id="insert" parameterType="cn.smbms.pojo.Information">
		insert into information
		(idInformation, time, title, type, QQ, WX, address,
		sex, phone,
		mailbox,
		majorCode, registrationType, company, idClassification,
		idArea,certificateType)
		values (#{idInformation,jdbcType=VARCHAR},
		#{time,jdbcType=TIMESTAMP},
		#{title,jdbcType=VARCHAR},
		#{type,jdbcType=INTEGER}, #{QQ,jdbcType=VARCHAR},
		#{WX,jdbcType=VARCHAR},
		#{address,jdbcType=VARCHAR},
		#{sex,jdbcType=VARCHAR}, #{phone,jdbcType=VARCHAR},
		#{mailbox,jdbcType=VARCHAR},
		#{majorCode,jdbcType=VARCHAR},
		#{registrationType,jdbcType=VARCHAR}, #{company,jdbcType=VARCHAR},
		#{idClassification,jdbcType=VARCHAR},
		#{idArea,jdbcType=VARCHAR},#{certificateType,jdbcType=VARCHAR})

	</insert>

	<update id="update" parameterType="cn.smbms.pojo.Information">
		update information
		<set>
			<if test="time != null">
				time = #{time,jdbcType=TIMESTAMP},
			</if>
			<if test="title != null">
				title = #{title,jdbcType=VARCHAR},
			</if>
			<if test="type != null">
				type = #{type,jdbcType=INTEGER},
			</if>
			<if test="QQ != null">
				QQ = #{QQ,jdbcType=VARCHAR},
			</if>
			<if test="WX != null">
				WX = #{WX,jdbcType=VARCHAR},
			</if>
			<if test="address != null">
				address = #{address,jdbcType=VARCHAR},
			</if>
			<if test="sex != null">
				sex = #{sex,jdbcType=VARCHAR},
			</if>
			<if test="phone != null">
				phone = #{phone,jdbcType=VARCHAR},
			</if>
			<if test="mailbox != null">
				mailbox = #{mailbox,jdbcType=VARCHAR},
			</if>
			<if test="majorCode != null">
				majorCode = #{majorCode,jdbcType=VARCHAR},
			</if>
			<if test="registrationType != null">
				registrationType = #{registrationType,jdbcType=VARCHAR},
			</if>
			<if test="company != null">
				company = #{company,jdbcType=VARCHAR},
			</if>
			<if test="idClassification != null">
				idClassification = #{idClassification,jdbcType=VARCHAR},
			</if>
			<if test="idArea != null">
				idArea = #{idArea,jdbcType=VARCHAR},
			</if>
		</set>
		where idInformation = #{idInformation,jdbcType=VARCHAR}
	</update>

	<delete id="delete" parameterType="string">
		delete from information
		where
		idInformation = #{idInformation,jdbcType=VARCHAR}
	</delete>

	<select id="information" resultMap="BaseResultMap"
		parameterType="string">
		SELECT * FROM qualifications.certificate ce right join
		(qualifications.classification c right join
		(qualifications.information i LEFT JOIN qualifications.area a ON
		i.idArea=a.idArea)
		on i.idClassification=c.idClassification) on
		ce.certificateCode =
		i.certificateCode
		where
		idInformation =
		#{idInformation,jdbcType=VARCHAR}
	</select>

	<select id="informations" resultMap="BaseResultMap">
		SELECT * FROM
		qualifications.certificate ce right
		join (qualifications.classification
		c right join
		(qualifications.information i LEFT JOIN
		qualifications.area a ON
		i.idArea=a.idArea)
		on
		i.idClassification=c.idClassification) on
		ce.certificateCode =
		i.certificateCode
		WHERE
		type=#{information.type}
		limit
		#{pagination.pageIndex},#{pagination.pageSize}
	</select>

</mapper>